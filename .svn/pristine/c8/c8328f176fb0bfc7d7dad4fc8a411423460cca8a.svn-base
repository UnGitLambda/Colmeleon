#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
@author : L3F1
"""

import PIL
import os
import Parser
import sys
import hashlib

sys.path.insert(0, "../Histogram")
from Histogram import Histogram
while "../Histogram" in sys.path:
    sys.path.remove("../Histogram")

class Image(PIL.Image.Image):
    def __init__(self, file):
        """
        The path to the file is given as a String.
        """
        assert type(file) is str
        assert file.endswith("png") or file.endswith("pdf") or file.endswith("jpg") or file.endswith("jpeg") or file.endswith("bmp") or file.endswith("gif")
        assert os.path.exists(file)
        self._path = file
        self._img = Parser.Parser._parse(file)
        self._histogram = Histogram(self._img, self._path)
        
    def display(self):
        return(self._img)
    
    def __str__(self):
        return self._path
    
    def __hash__(self):
        return(hashlib.sha256(self._path) + hashlib.sha256(self._histogram))
