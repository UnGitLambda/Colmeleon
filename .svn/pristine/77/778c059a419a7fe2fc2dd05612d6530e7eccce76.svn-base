import matplotlib.pyplot as plt
import numpy as np

class Histogram :
    def __init__(self, img, bins=256):
        self.image = img
        self.bins = bins
        self.Histograms = plt.hist(img.flatten()*255,range=[0,255], color = "red", alpha = 0.5, bins = self.bins)

    def histogram(img, grey = False) : 
        ch = ColorHistogram(img)
        if ch.get_red == ch.get_green == ch.get_blue or grey :
            return GreyHistogram(img)
        else :
            return ch

class ColorHistogram(Histogram) :
    def __init__(self, img):
        self.redHistogram = plt.hist(img[:,:,0].flatten()*255,range=[0,255], color = "red", alpha = 0.5, bins = 256)
        self.greenHistogram = plt.hist(img[:,:,1].flatten()*255,range=[0,255], color = "green", alpha = 0.5, bins = 256)
        self.blueHistogram = plt.hist(img[:,:,2].flatten()*255,range=[0,255], color = "blue", alpha = 0.5, bins = 256)

        
    def get_red(self):
        return self.redHistogram[0]
    
    def get_green(self):
        return self.greenHistogram[0]
        
    def get_blue(self):
        return self.blueHistogram[0]
    
    def set_red(self, hist):
        self.redHistogram[0] = hist
        
    def set_green(self, hist):
        self.greenHistogram[0] = hist
        
    def set_blue(self, hist):
        self.blueHistogram[0] = hist

class GreyHistogram(Histogram) :
    def __init__(self, img):
        self.greyHistogram = plt.hist(img[:,:,0].flatten()*255,range=[0,255], color = "gray", alpha = 0.5, bins = 256)
        
    def get_gray(self):
        return self.greyHistogram[0]
    
    def set_grey(self, hist):
        self.greyHistogram[0] = hist
