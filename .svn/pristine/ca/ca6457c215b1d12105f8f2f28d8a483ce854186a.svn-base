# -*- coding: utf-8 -*-
"""
@author: L3F1
"""

import Image
import os
import PIL
import sys

sys.path.insert(0, "../Histogram")
import Histogram

class Parser:
    def _parse(file):
        """
        The path to the file is given as a String.
        """
        assert type(file) is str
        assert file.endswith("png") or file.endswith("pdf") or file.endswith("jpg") or file.endswith("jpeg") or file.endswith("bmp") or file.endswith("gif")
        assert os.path.exists(file)
        return(PIL.Image.open(file))

    def _scale_image(img):
        assert type(img) is Image.Image, f"Parser : the scaling function takes an image as argument and not {type(img)}"
        scale = min(512/img.height,512/img.width)
        return img.resize((int(scale*img.width), int(scale*img.height)))

    def _color_constancy(hist):
        assert type(hist) is Histogram
        constancy = hist.redHistogram + hist.grennHistogram + hist.blueHistogram
        tmpR = hist.redHistogram / constancy
        return(tmpR)
    
    def parse(file):
        """
        The path to the file is given as a String.
        """
        assert type(file) is str
        assert file.endswith("png") or file.endswith("pdf") or file.endswith("jpg") or file.endswith("jpeg") or file.endswith("bmp") or file.endswith("gif")
        assert os.path.exists(file)
        return(Image.Image(file))